{"ast":null,"code":"import _regeneratorRuntime from\"/Users/keerthanaarcot/Personal/react-assessment/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/keerthanaarcot/Personal/react-assessment/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/keerthanaarcot/Personal/react-assessment/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/keerthanaarcot/Personal/react-assessment/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/keerthanaarcot/Personal/react-assessment/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Grid from\"@mui/material/Grid\";import List from\"@mui/material/List\";import ListItem from\"@mui/material/ListItem\";import ListItemText from\"@mui/material/ListItemText\";import{makeStyles}from'@mui/styles';import{useParams}from\"react-router-dom\";import{CommentInput}from\"./CommentInput\";import EditIcon from'@mui/icons-material/Edit';import Delete from'@mui/icons-material/Delete';import{Button}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{width:\"100%\",backgroundColor:'grey'},grid:{margin:0,width:\"100%\",backgroundColor:'grey'},media:{height:0,paddingTop:\"56.25%\"// 16:9\n},actions:{display:\"flex\"},icon:{margin:0},card:{width:\"100%\"}};});export var Comments=function Comments(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),editedComment=_useState4[0],setEditedComment=_useState4[1];var id=props.id;var classes=useStyles({});function fetchPosts(){return _fetchPosts.apply(this,arguments);}function _fetchPosts(){_fetchPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var header,sendData,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:header=new Headers({'Access-Control-Allow-Origin':'*','Content-Type':'multipart/form-data'});sendData={mode:'cors',header:header};_context.prev=2;_context.next=5;return fetch(\"https://jsonplaceholder.typicode.com/posts/\".concat(id,\"/comments\"),sendData);case 5:res=_context.sent;_context.next=8;return res.json();case 8:res=_context.sent;setComments(res.map(function(e){return _objectSpread({editing:false},e);}));_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);handleErrors(_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return _fetchPosts.apply(this,arguments);}useEffect(function(){console.log(\"inside\");fetchPosts();},[id]);function handleErrors(response){if(!response.ok){console.error(response);throw Error(response.statusText);}return response;}return/*#__PURE__*/_jsxs(\"div\",{className:classes.root,children:[/*#__PURE__*/_jsx(List,{component:\"nav\",children:comments&&Array.isArray(comments)&&comments.length>0&&comments.map(function(comment,id){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(ListItem,{button:true,divider:true,onClick:function onClick(e){return console.log(e);},children:[/*#__PURE__*/_jsx(ListItemText,{primary:comment.name,secondary:\"email: \"+comment.email}),!comment.editing&&/*#__PURE__*/_jsx(ListItemText,{primary:comment.body}),/*#__PURE__*/_jsx(EditIcon,{onClick:function onClick(e){var mod=_toConsumableArray(comments).map(function(e){if(e.id===comment.id){return _objectSpread(_objectSpread({},e),{},{editing:true});}else{return e;}});setComments(mod);}}),/*#__PURE__*/_jsx(Delete,{onClick:function onClick(e){var mod=_toConsumableArray(comments).filter(function(e){if(e.id!==comment.id){return e;}});setComments(mod);}}),comment.editing&&/*#__PURE__*/_jsx(CommentInput,{mycomment:comment.body,onEditComment:function onEditComment(e){setEditedComment(e);}}),comment.editing&&/*#__PURE__*/_jsx(Button,{title:\"Save\",onClick:function onClick(e){var mod=_toConsumableArray(comments).map(function(e){if(e.id===comment.id){return _objectSpread(_objectSpread({},e),{},{body:editedComment,editing:false});}else{return e;}});setComments(mod);},children:\" Save \"})]})},id);})}),/*#__PURE__*/_jsx(CommentInput,{})]});};","map":{"version":3,"names":["React","useEffect","useState","Grid","List","ListItem","ListItemText","makeStyles","useParams","CommentInput","EditIcon","Delete","Button","useStyles","theme","root","width","backgroundColor","grid","margin","media","height","paddingTop","actions","display","icon","card","Comments","props","comments","setComments","editedComment","setEditedComment","id","classes","fetchPosts","header","Headers","sendData","mode","fetch","res","json","map","e","editing","handleErrors","console","log","response","ok","error","Error","statusText","Array","isArray","length","comment","name","email","body","mod","filter"],"sources":["/Users/keerthanaarcot/Personal/react-assessment/src/components/Comments.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport List from \"@mui/material/List\";\nimport ListItem from \"@mui/material/ListItem\";\nimport ListItemText from \"@mui/material/ListItemText\";\nimport { makeStyles } from '@mui/styles';\nimport { useParams } from \"react-router-dom\";\nimport { CommentInput } from \"./CommentInput\";\nimport EditIcon from '@mui/icons-material/Edit';\nimport Delete from '@mui/icons-material/Delete';\nimport { Button } from \"@mui/material\";\n\n\nconst useStyles = makeStyles((theme) => {\n    return {\n        root: {\n            width: \"100%\",\n            backgroundColor: 'grey'\n        },\n        grid: {\n            margin: 0,\n            width: \"100%\",\n            backgroundColor: 'grey'\n        },\n        media: {\n            height: 0,\n            paddingTop: \"56.25%\" // 16:9\n        },\n        actions: {\n            display: \"flex\"\n        },\n        icon: {\n            margin: 0\n        },\n        card: {\n            width: \"100%\"\n        }\n    }\n});\n\n\nexport const Comments = (props) => {\n    const [comments, setComments] = useState([])\n    const [editedComment, setEditedComment] = useState('')\n    const { id } = props\n    const classes = useStyles({});\n\n    async function fetchPosts() {\n        let header = new Headers({\n            'Access-Control-Allow-Origin': '*',\n            'Content-Type': 'multipart/form-data'\n        });\n        let sendData = {\n            mode: 'cors',\n            header: header\n        };\n        try {\n            let res = await fetch(`https://jsonplaceholder.typicode.com/posts/${id}/comments`, sendData)\n            res = await res.json()\n            setComments(res.map((e) => ({ editing: false, ...e })))\n        } catch (e) {\n            handleErrors(e)\n        }\n    }\n\n    useEffect(() => {\n        console.log(\"inside\")\n        fetchPosts()\n    }, [id])\n\n\n\n    function handleErrors(response) {\n        if (!response.ok) {\n            console.error(response);\n            throw Error(response.statusText);\n        }\n        return response;\n    }\n    return (\n        <div\n            className={classes.root}\n        >\n            {/* {JSON.stringify(comments)} */}\n            <List component=\"nav\">\n                {comments && Array.isArray(comments) && comments.length > 0 && comments.map((comment, id) => (\n                    <div key={id}>\n                        <ListItem\n                            button\n                            divider\n                            onClick={(e) => console.log(e)}\n                        >\n                            <ListItemText\n                                primary={comment.name}\n                                secondary={\"email: \" + comment.email}\n                            />\n                            {!comment.editing && <ListItemText\n                                primary={comment.body}\n                            />}\n                            <EditIcon onClick={(e) => {\n                                const mod = [...comments].map((e) => {\n                                    if (e.id === comment.id) {\n                                        return { ...e, editing: true }\n                                    } else {\n                                        return e\n                                    }\n                                })\n                                setComments(mod)\n                            }} />\n                            <Delete onClick={(e) => {\n                                const mod = [...comments].filter((e) => {\n                                    if (e.id !== comment.id) {\n                                        return e\n                                    }\n                                })\n                                setComments(mod)\n                            }} />\n                            {comment.editing && <CommentInput mycomment={comment.body} onEditComment={(e) => {\n                                setEditedComment(e)\n                            }} />}\n                            {comment.editing && <Button title=\"Save\" onClick={(e) => {\n                                const mod = [...comments].map((e) => {\n                                    if (e.id === comment.id) {\n                                        return { ...e, body: editedComment, editing: false }\n                                    } else {\n                                        return e\n                                    }\n                                })\n                                setComments(mod)\n                            }}> Save </Button>}\n                        </ListItem>\n                    </div>\n                ))}\n            </List>\n            <CommentInput />\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}